<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>CAL programming tips</title><link href="../eclipsehelp.css" rel="stylesheet" type="text/css"><meta content="DocBook XSL Stylesheets V1.71.1" name="generator"><link rel="start" href="index.html" title="CAL Development Guide"><link rel="up" href="bk02ar02.html" title="Effective CAL"><link rel="prev" href="bk02ar02s09.html" title="How do I create an abstract data type in CAL?"><link rel="next" href="bk02ar02s11.html" title="Legal Notice"><link rel="preface" href="bk01pr01.html" title="Overview"><link rel="chapter" href="bk01ch01.html" title="Chapter&nbsp;1.&nbsp;Installing the CAL Eclipse Plug-in"><link rel="chapter" href="bk01ch02.html" title="Chapter&nbsp;2.&nbsp;Setting up Eclipse for CAL"><link rel="chapter" href="bk01ch03.html" title="Chapter&nbsp;3.&nbsp;Tutorial: Hello World"><link rel="chapter" href="bk01ch04.html" title="Chapter&nbsp;4.&nbsp;Using the CAL Eclipse Plug-in"><link rel="article" href="bk02ar01.html" title="CAL for Haskell Programmers"><link rel="article" href="bk02ar02.html" title="Effective CAL"><link rel="chapter" href="Overview.html" title="Chapter&nbsp;1.&nbsp;Overview"><link rel="chapter" href="bk03ch02.html" title="Chapter&nbsp;2.&nbsp;Getting Started with CAL"><link rel="chapter" href="bk03ch03.html" title="Chapter&nbsp;3.&nbsp;Language Reference"><link rel="chapter" href="bk03ch04.html" title="Chapter&nbsp;4.&nbsp;Standard Library Reference"><link rel="appendix" href="bk03apa.html" title="Appendix&nbsp;A.&nbsp;CAL source formatting conventions"><link rel="appendix" href="bk03apb.html" title="Appendix&nbsp;B.&nbsp;Suggested reading"><link rel="appendix" href="bk03apc.html" title="Appendix&nbsp;C.&nbsp;Language keywords"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table summary="Navigation header" width="100%"><tr><th align="center" colspan="3">CAL programming tips</th></tr><tr><td align="left" width="20%"><a accesskey="p" href="bk02ar02s09.html">Prev</a>&nbsp;</td><th align="center" width="60%">Effective CAL</th><td align="right" width="20%">&nbsp;<a accesskey="n" href="bk02ar02s11.html">Next</a></td></tr></table><hr></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="N21504"></a>CAL programming tips</h2></div></div></div>
    

    <p>What follows is a list of CAL programming tips in note form. Some of these tips will be
    expanded into full essays as above in the future. In the meantime, hopefully they will be of
    some use even in this short form. <div class="itemizedlist"><ul type="disc"><li>
          <p>follow the CAL code formatting conventions</p>

          <div class="itemizedlist"><ul type="circle"><li>
              <p>JEdit makes this particularly nice</p>
            </li><li>
              <p>setting Eclipse's Java editor to recognize .cal files as Java also works
              OK.</p>
            </li></ul></div>
        </li><li>
          <p>avoid the use of un-encapsulated mutable foreign types</p>
        </li><li>
          <p>don't use a record or tuple type when an algebraic type will work <div class="itemizedlist"><ul type="circle"><li>
                <p>the algebraic type offers better abstraction (the name of the type) better
                encapsulation, better performance characteristics and better control</p>
              </li></ul></div></p>
        </li><li>
          <p>be aware of what derived instances mean- both when to use them, and when not to use
          them</p>
        </li><li>
          <p>document your code using CALDoc<div class="itemizedlist"><ul type="circle"><li>
                <p>it is important to provide CALDoc for modules, types and instances.</p>
              </li></ul></div></p>
        </li><li>
          <p>unit test your functions<div class="itemizedlist"><ul type="circle"><li>
                <p>create examples functions</p>
              </li><li>
                <p>unit test for correctness as well as performance (speed, space usage,
                scalability)</p>
              </li><li>
                <p>follow existing examples in the libraries for how to do this.</p>
              </li></ul></div></p>
        </li><li>
          <p>provide top-level type declarations, and type declarations for local functions
          whenever possible</p>
        </li><li>
          <p>practice good code encapsulation</p>

          <div class="itemizedlist"><ul type="circle"><li>
              <p>make data constructors private</p>
            </li><li>
              <p>make the implementation type of foreign types private</p>
            </li><li>
              <p>provide constructor functions that validate arguments e.g. if a certain Int
              field needs to be positive.</p>
            </li><li>
              <p>comment on the invariants of the type in its definition.</p>
            </li></ul></div>
        </li><li>
          <p>understand the operational evaluation semantics of CAL- lazy reduction order</p>

          <div class="itemizedlist"><ul type="circle"><li>
              <p>understand the seq function</p>
            </li><li>
              <p>understand plinging</p>

              <div class="itemizedlist"><ul type="square"><li>
                  <p>plinging of data constructor fields</p>
                </li><li>
                  <p>plinging of function arguments</p>
                </li></ul></div>
            </li></ul></div>
        </li><li>
          <p>understand the accumulating parameter coding pattern</p>

          <div class="itemizedlist"><ul type="circle"><li>
              <p>use extra arguments to cache partial computations or intermediate results</p>
            </li><li>
              <p>when writing a directly recursive function, don't perform the computation in the
              returned value; use an argument instead</p>
            </li></ul></div>
        </li><li>
          <p>be aware of the performance characteristics of the library data structures you are
          using</p>

          <div class="itemizedlist"><ul type="circle"><li>
              <p>List, String, Map, IntMap, Set, records/tuples, ...</p>
            </li></ul></div>
        </li><li>
          <p>learn and use the functions from the libraries.</p>
        </li><li>
          <p>keep things as simple as possible</p>

          <div class="itemizedlist"><ul type="circle"><li>
              <p>create types to increase abstraction and encapsulation</p>
            </li><li>
              <p>avoid writing overly long functions</p>

              <div class="itemizedlist"><ul type="square"><li>
                  <p>they are harder to understand and unit test</p>
                </li></ul></div>
            </li><li>
              <p>avoid the overuse of deep levels of nesting (i.e. many levels of local function
              definitions)</p>
            </li><li>
              <p>avoid writing overly long modules</p>

              <div class="itemizedlist"><ul type="square"><li>
                  <p>break up into several modules and take advantage of the friend module
                  pattern and separate compilation to organize your code into comprehensible
                  chunks.</p>
                </li></ul></div>
            </li></ul></div>
        </li><li>
          <p>consider defining instances for the standard type classes if they make sense</p>
        </li><li>
          <p>look for examples in the existing CAL code for how a problem was solved.</p>
        </li><li>
          <p>to provide extensibility to a module's functionality,</p>

          <div class="itemizedlist"><ul type="circle"><li>
              <p>use higher order functions</p>
            </li><li>
              <p>use abstract data types in the api (can later add new constructors for the data
              types)</p>
            </li><li>
              <p>use type classes</p>
            </li><li>
              <p>favour the use of higher order functions over type classes</p>
            </li></ul></div>
        </li><li>
          <p>consult the existing resources on CAL</p>

          <div class="itemizedlist"><ul type="circle"><li>
              <p>CAL User's Guide</p>
            </li><li>
              <p>the source code for the existing CAL modules, especially non-test modules in CAL
              Platform and CAL Libraries.</p>
            </li><li>
              <p>the Tutorial* .cal modules</p>
            </li><li>
              <p>generated CAL doc (this is easily generated from the GemCutter)</p>
            </li></ul></div>
        </li><li>
          <p>be aware of the tools available for CAL development</p>

          <div class="itemizedlist"><ul type="circle"><li>
              <p>GemCutter</p>
            </li><li>
              <p>ICE</p>
            </li><li>
              <p>-etc.</p>
            </li></ul></div>
        </li><li>
          <p>learn Haskell and study well-known and respected Haskell libraries</p>
        </li><li>
          <p>understand how to mutate</p>

          <div class="itemizedlist"><ul type="circle"><li>
              <p>when writing functions that must manipulate state within their implementation,
              try to encapsulate them so that the publicly exposed version is a pure stateless
              function.</p>
            </li></ul></div>
        </li></ul></div></p>

    <p>other advice: <div class="itemizedlist"><ul type="disc" compact><li>
          <p>know how to generate lecc Java source code. Study the source of functions you
          create. Are they reasonable?</p>
        </li><li>
          <p>learn the various ICE diagnostic tools such as call counts, logging, etc</p>
        </li><li>
          <p>understand the Prelude.eager function and when to use it.</p>
        </li><li>
          <p>don't get discouraged!</p>
        </li></ul></div></p>
  </div><div class="navfooter"><hr><table summary="Navigation footer" width="100%"><tr><td align="left" width="40%"><a accesskey="p" href="bk02ar02s09.html">Prev</a>&nbsp;</td><td align="center" width="20%"><a accesskey="u" href="bk02ar02.html">Up</a></td><td align="right" width="40%">&nbsp;<a accesskey="n" href="bk02ar02s11.html">Next</a></td></tr><tr><td valign="top" align="left" width="40%">How do I create an abstract data type in CAL?&nbsp;</td><td align="center" width="20%"><a accesskey="h" href="index.html">Home</a></td><td valign="top" align="right" width="40%">&nbsp;Legal Notice</td></tr></table></div></body></html>