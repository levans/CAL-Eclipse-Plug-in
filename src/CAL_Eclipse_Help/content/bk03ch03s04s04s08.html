<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Foreign function definitions for Java array operations</title><link href="../eclipsehelp.css" rel="stylesheet" type="text/css"><meta content="DocBook XSL Stylesheets V1.71.1" name="generator"><link rel="start" href="index.html" title="CAL Development Guide"><link rel="up" href="bk03ch03s04s04.html" title="Foreign definitions"><link rel="prev" href="bk03ch03s04s04s07.html" title="Foreign function definitions for Java class literals"><link rel="next" href="bk03ch03s04s05.html" title="Type class definitions"><link rel="preface" href="bk01pr01.html" title="Overview"><link rel="chapter" href="bk01ch01.html" title="Chapter&nbsp;1.&nbsp;Installing the CAL Eclipse Plug-in"><link rel="chapter" href="bk01ch02.html" title="Chapter&nbsp;2.&nbsp;Setting up Eclipse for CAL"><link rel="chapter" href="bk01ch03.html" title="Chapter&nbsp;3.&nbsp;Tutorial: Hello World"><link rel="chapter" href="bk01ch04.html" title="Chapter&nbsp;4.&nbsp;Using the CAL Eclipse Plug-in"><link rel="article" href="bk02ar01.html" title="CAL for Haskell Programmers"><link rel="article" href="bk02ar02.html" title="Effective CAL"><link rel="chapter" href="Overview.html" title="Chapter&nbsp;1.&nbsp;Overview"><link rel="chapter" href="bk03ch02.html" title="Chapter&nbsp;2.&nbsp;Getting Started with CAL"><link rel="chapter" href="bk03ch03.html" title="Chapter&nbsp;3.&nbsp;Language Reference"><link rel="chapter" href="bk03ch04.html" title="Chapter&nbsp;4.&nbsp;Standard Library Reference"><link rel="appendix" href="bk03apa.html" title="Appendix&nbsp;A.&nbsp;CAL source formatting conventions"><link rel="appendix" href="bk03apb.html" title="Appendix&nbsp;B.&nbsp;Suggested reading"><link rel="appendix" href="bk03apc.html" title="Appendix&nbsp;C.&nbsp;Language keywords"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table summary="Navigation header" width="100%"><tr><th align="center" colspan="3">Foreign function definitions for Java array operations</th></tr><tr><td align="left" width="20%"><a accesskey="p" href="bk03ch03s04s04s07.html">Prev</a>&nbsp;</td><th align="center" width="60%">Foreign definitions</th><td align="right" width="20%">&nbsp;<a accesskey="n" href="bk03ch03s04s05.html">Next</a></td></tr></table><hr></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="N23D69"></a>Foreign function definitions for Java array operations</h4></div></div></div>
          

          <p>Java provides primitive operator support for arrays. In particular, for creating,
          updating, subscripting and taking the length of an array. This functionality can be
          exposed as CAL functions, as the following examples show:<div class="informalexample">
              <pre class="programlisting">data foreign unsafe import jvm "int[]" JIntArray;</pre>
            </div><div class="informalexample">
              <pre class="programlisting">foreign unsafe import jvm "newArray"
    newIntArray :: Int -&gt; JIntArray;</pre>
            </div><div class="informalexample">
              <pre class="programlisting">foreign unsafe import jvm "updateArray"
    updateIntArray :: JIntArray -&gt; Int -&gt; Int -&gt; Int;</pre>
            </div><div class="informalexample">
              <pre class="programlisting">foreign unsafe import jvm "lengthArray"
    lengthIntArray :: JIntArray -&gt; Int;</pre>
            </div><div class="informalexample">
              <pre class="programlisting">foreign unsafe import jvm "subscriptArray"
    subscriptIntArray :: JIntArray -&gt; Int -&gt; Int;</pre>
            </div></p>

          <p>Note that multi-dimensional arrays are also supported, in all the variants supported
          by the JVM. For example, you can subscript a 2-dimensional array at one index (to get a
          one-dimensional array) or at 2-indices (to get an element value).<div class="informalexample">
              <pre class="programlisting">data foreign unsafe import jvm "int[][]"
    JInt2Array;</pre>
            </div><div class="informalexample">
              <pre class="programlisting">//specify the size of one dimension
foreign unsafe import jvm "newArray"
    newInt2Array :: Int -&gt; JInt2Array;</pre>
            </div><div class="informalexample">
              <pre class="programlisting">//specify the sizes of both dimensions
foreign unsafe import jvm "newArray"
    newInt2Array2 :: Int -&gt; Int -&gt; JInt2Array;</pre>
            </div><div class="informalexample">
              <pre class="programlisting">foreign unsafe import jvm "updateArray"
    updateInt2Array :: JInt2Array -&gt; Int -&gt; JIntArray -&gt; JIntArray;</pre>
            </div><div class="informalexample">
              <pre class="programlisting">foreign unsafe import jvm "updateArray"
    updateInt2Array2 :: JInt2Array -&gt; Int -&gt; Int -&gt; Int -&gt; Int;</pre>
            </div><div class="informalexample">
              <pre class="programlisting">foreign unsafe import jvm "subscriptArray"
    subscriptInt2Array :: JInt2Array -&gt; Int -&gt; Int -&gt; Int;</pre>
            </div><div class="informalexample">
              <pre class="programlisting">foreign unsafe import jvm "subscriptArray"
    subscriptInt2ArrayToIntArray :: JInt2Array -&gt; Int -&gt; JIntArray;</pre>
            </div></p>
        </div><div class="navfooter"><hr><table summary="Navigation footer" width="100%"><tr><td align="left" width="40%"><a accesskey="p" href="bk03ch03s04s04s07.html">Prev</a>&nbsp;</td><td align="center" width="20%"><a accesskey="u" href="bk03ch03s04s04.html">Up</a></td><td align="right" width="40%">&nbsp;<a accesskey="n" href="bk03ch03s04s05.html">Next</a></td></tr><tr><td valign="top" align="left" width="40%">Foreign function definitions for Java class literals&nbsp;</td><td align="center" width="20%"><a accesskey="h" href="index.html">Home</a></td><td valign="top" align="right" width="40%">&nbsp;Type class definitions</td></tr></table></div></body></html>